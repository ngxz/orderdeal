<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>商品列表</title>
		<meta content="width=device-width, initial-scale=1, maximum-scale=1.2, user-scalable=0" name="viewport" />
		<link rel="stylesheet" href="__PUBLIC__/static/css/global.css" />
		<link rel="stylesheet" href="__PUBLIC__/static/css/goodslist.css" />
	</head>
	<body>
		<div class="title">商品管理</div>
		<div class="navBox">
			<ul>
				<li class="active"><a href="#">数码产品</a></li>
				<li><a href="#">家用电器</a></li>
				<li><a href="#">服饰</a></li>
				<li><a href="#">家用电器</a></li>
				<li><a href="#">服饰</a></li>
			</ul>
		</div>
		<div class="goodsList">
			<ul>
				<li>
					<img class="left" src="__PUBLIC__/static/img/photo14.jpg" />
					<div class="left content">
						<div class="goodsTitle">七彩虹iGame750Ti 烈焰战神U-Twin-2GD5参数</div>
						<div class="price left">
							<span>￥900.00</span>
							<input type="hidden" name="id" value="666"/>
							<input type="button" name="tokenOff" value="正常" />
							<input type="button" name="delete" value="删除" />
							<input type="button" name="editPrice" value="修改价格" />
						</div>
						
					</div>
				</li>
				<li>
					<img class="left" src="__PUBLIC__/static/img/photo14.jpg" />
					<div class="left content">
						<div class="goodsTitle">七彩虹iGame750Ti 烈焰战神U-Twin-2GD5参数</div>
						<div class="price left">
							<span>￥900.00</span>
							<input type="hidden" name="id" value="666"/>
							<input type="button" name="tokenOff" value="正常" />
							<input type="button" name="delete" value="删除" />
							<input type="button" name="editPrice" value="修改价格" />
						</div>
						
					</div>
				</li>
				<li>
					<img class="left" src="__PUBLIC__/static/img/photo14.jpg" />
					<div class="left content">
						<div class="goodsTitle">七彩虹iGame750Ti 烈焰战神U-Twin-2GD5参数</div>
						<div class="price left">
							<span>￥900.00</span>
							<input type="hidden" name="id" value="666"/>
							<input type="button" name="tokenOff" value="正常" />
							<input type="button" name="delete" value="删除" />
							<input type="button" name="editPrice" value="修改价格" />
						</div>
						
					</div>
				</li>
				<li>
					<img class="left" src="__PUBLIC__/static/img/photo14.jpg" />
					<div class="left content">
						<div class="goodsTitle">七彩虹iGame750Ti 烈焰战神U-Twin-2GD5参数</div>
						<div class="price left">
							<span>￥900.00</span>
							<input type="hidden" name="id" value="666"/>
							<input type="button" name="tokenOff" value="正常" />
							<input type="button" name="delete" value="删除" />
							<input type="button" name="editPrice" value="修改价格" />
						</div>
						
					</div>
				</li>
				<li>
					<img class="left" src="__PUBLIC__/static/img/photo14.jpg" />
					<div class="left content">
						<div class="goodsTitle">七彩虹iGame750Ti 烈焰战神U-Twin-2GD5参数</div>
						<div class="price left">
							<span>￥900.00</span>
							<input type="hidden" name="id" value="666"/>
							<input type="button" name="tokenOff" value="正常" />
							<input type="button" name="delete" value="删除" />
							<input type="button" name="editPrice" value="修改价格" />
						</div>
						
					</div>
				</li>
			</ul>
		</div>
		<include file='./Application/Home/View/Public/_footer.html' />
	</body>
	<script type="text/javascript" src="__PUBLIC__/static/js/jquery-1.9.1.min.js" ></script>
	<script type="text/javascript" src="__PUBLIC__/static/js/main.js" ></script>
	<script type="text/javascript" src="__PUBLIC__/static/js/layer.js" ></script>
	<script type="text/javascript">
		$(function(){
			//根绝分类数量设置宽度
			var width = $(".navBox ul li").length;
			$(".navBox ul").width((width*8.1)+'rem');
		});
		//下架
		$("input[name=tokenOff]").bind('click',function(){
			var status = $(this).val();
			var id = $(this).parent().find('input[name=id]').val();
			if(status == '正常'){
				//异步修改
				$(this).val('已下架');
				$(this).css({'border':'1px solid #e20000','color':'#e20000'});
			}else{
				//异步修改
				$(this).val('正常');
				$(this).css({'border':'1px solid green','color':'green'});
			}
		});
		//删除
		$("input[name=delete]").bind('click',function(){
			layer.open({
			    content: '您确定要删除该商品吗？'
			    ,btn: ['删除', '取消']
			    ,yes: function(index){
			      	var id = $(this).parent().find('input[name=id]').val();
					//异步修改
					layers('已经删除');
			    }
			});
		});
		//修改价格弹出
		$("input[name=editPrice]").bind('click',function(){
			var id = $(this).parent().find('input[name=id]').val();
			//弹出
			layer.open({
			    title: [
			      '修改价格',
			      'background-color: #eb6435; color:#fff;'
			    ],
			    content: "<input type=text style='height:2rem;width:16rem;background-color: #fff;border:1px solid #ccc;border-radius: 0.4rem;font-size: 0.8rem;' name='newPrice'/><br/>"+
			    "<input style='border: 1px solid green;color: green;padding: 0.2rem 0.6rem;background-color: #fff;border-radius: 0.4rem;font-size: 0.8rem;margin-top:2rem' onclick='sendPrice("+id+")' type=button value='确认'/>"
			});
		});
		//修改价格
		function sendPrice(id){
			var newPrice = $("input[name=newPrice]").val();
			//异步修改
			layers(newPrice);
		}
	</script>
</html>
